{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\xfit.vn\\\\app\\\\application\\\\forms\\\\CommentsCount.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport * as firebase from 'firebase';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\n\nvar CommentsCount = function (_Component) {\n  _inherits(CommentsCount, _Component);\n\n  var _super = _createSuper(CommentsCount);\n\n  function CommentsCount(props) {\n    var _this;\n\n    _classCallCheck(this, CommentsCount);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      rating: 0\n    };\n    var postId = props.postId;\n    _this.commentsRef = firebase.database().ref(\"postComments/\" + postId);\n    return _this;\n  }\n\n  _createClass(CommentsCount, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.commentsRef.on(\"child_added\", function (snapshot) {\n        _this2.commentsRef.on(\"value\", function (snap) {\n          var comments = [];\n          snap.forEach(function (row) {\n            comments.push(parseInt(row.val().rating));\n          });\n\n          _this2.setState({\n            rating: comments.length\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rating = this.state.rating;\n      return React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 7\n        }\n      }, \"(\", rating, \")\");\n    }\n  }]);\n\n  return CommentsCount;\n}(Component);\n\nexport { CommentsCount as default };","map":{"version":3,"sources":["C:/Users/DELL/Desktop/xfit.vn/app/application/forms/CommentsCount.js"],"names":["React","Component","firebase","CommentsCount","props","state","rating","postId","commentsRef","database","ref","on","snapshot","snap","comments","forEach","row","push","parseInt","val","setState","length"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;;;IAGqBC,a;;;;;AACpB,yBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AACnB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AAFmB,QAKZC,MALY,GAKFH,KALE,CAKZG,MALY;AAMnB,UAAKC,WAAL,GAAmBN,QAAQ,CAACO,QAAT,GAAoBC,GAApB,mBAAwCH,MAAxC,CAAnB;AANmB;AAOnB;;;;wCAEoB;AAAA;;AAEpB,WAAKC,WAAL,CAAiBG,EAAjB,CAAoB,aAApB,EAAmC,UAAAC,QAAQ,EAAI;AAC9C,QAAA,MAAI,CAACJ,WAAL,CAAiBG,EAAjB,CAAoB,OAApB,EAA6B,UAAAE,IAAI,EAAI;AACpC,cAAIC,QAAQ,GAAG,EAAf;AACAD,UAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;AACnBF,YAAAA,QAAQ,CAACG,IAAT,CAAcC,QAAQ,CAACF,GAAG,CAACG,GAAJ,GAAUb,MAAX,CAAtB;AACA,WAFD;;AAIA,UAAA,MAAI,CAACc,QAAL,CAAc;AACbd,YAAAA,MAAM,EAAEQ,QAAQ,CAACO;AADJ,WAAd;AAOA,SAbD;AAcA,OAfD;AAgBA;;;6BAES;AAAA,UACFf,MADE,GACQ,KAAKD,KADb,CACFC,MADE;AAET,aACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAQA,MAAR,MADJ;AAGA;;;;EAnCyCL,S;;SAAtBE,a","sourcesContent":["import React, {Component} from 'react';\nimport * as firebase from 'firebase';\nimport {View, Text} from \"react-native\";\n\nexport default class CommentsCount extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trating: 0\n\t\t};\n\t\tconst {postId} = props;\n\t\tthis.commentsRef = firebase.database().ref(`postComments/${postId}`);\n\t}\n\n\tcomponentDidMount () {\n\n\t\tthis.commentsRef.on(\"child_added\", snapshot => {\n\t\t\tthis.commentsRef.on(\"value\", snap => {\n\t\t\t\tlet comments = [];\n\t\t\t\tsnap.forEach(row => {\n\t\t\t\t\tcomments.push(parseInt(row.val().rating));\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\trating: comments.length\n\t\t\t\t});\n\n\t\t\t\t/*this.refs.rating.setCurrentRating(\n\t\t\t\t\tcomments.reduce((previous, current) => previous + current, 0) / comments.length\n\t\t\t\t);*/\n\t\t\t})\n\t\t});\n\t}\n\n\trender () {\n\t\tconst {rating} = this.state;\n\t\treturn (\n      <Text>({rating})</Text>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}