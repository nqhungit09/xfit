{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\xfit.vn\\\\app\\\\application\\\\forms\\\\PostComments.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport AppPreLoader from \"../components/AppPreLoader\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport * as firebase from 'firebase';\nimport CommentEmpty from \"./CommentEmpty\";\nimport CommentList from \"../components/CommentList\";\n\nvar PostComments = function (_Component) {\n  _inherits(PostComments, _Component);\n\n  var _super = _createSuper(PostComments);\n\n  function PostComments() {\n    var _this;\n\n    _classCallCheck(this, PostComments);\n\n    _this = _super.call(this);\n    _this._isMounted = false;\n    _this.state = {\n      comments: [],\n      loaded: false\n    };\n    return _this;\n  }\n\n  _createClass(PostComments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._isMounted = true;\n      firebase.database().ref(\"postComments/\" + this.props.postId).on('value', function (snapshot) {\n        var comments = [];\n        snapshot.forEach(function (row) {\n          comments.push({\n            id: row.key,\n            rating: row.val().rating,\n            comment: row.val().comment,\n            user: row.val().user\n          });\n        });\n\n        if (_this2._isMounted) {\n          _this2.setState({\n            comments: comments,\n            loaded: true\n          });\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          comments = _this$state.comments,\n          loaded = _this$state.loaded;\n\n      if (!loaded) {\n        return React.createElement(AppPreLoader, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 11\n          }\n        });\n      }\n\n      if (!comments.length) {\n        return React.createElement(CommentEmpty, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 10\n          }\n        });\n      }\n\n      return React.createElement(View, {\n        style: {\n          marginTop: 25,\n          marginBottom: 25\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 4\n        }\n      }, React.createElement(FlatList, {\n        data: comments,\n        renderItem: function renderItem(data) {\n          return _this3.renderComment(data.item);\n        },\n        keyExtractor: function keyExtractor(data) {\n          return data.id;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }\n      }));\n    }\n  }, {\n    key: \"renderComment\",\n    value: function renderComment(comment) {\n      return React.createElement(CommentList, {\n        comment: comment,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 4\n        }\n      });\n    }\n  }]);\n\n  return PostComments;\n}(Component);\n\nexport { PostComments as default };","map":{"version":3,"sources":["C:/Users/DELL/Desktop/xfit.vn/app/application/forms/PostComments.js"],"names":["React","Component","AppPreLoader","firebase","CommentEmpty","CommentList","PostComments","_isMounted","state","comments","loaded","database","ref","props","postId","on","snapshot","forEach","row","push","id","key","rating","val","comment","user","setState","length","marginTop","marginBottom","data","renderComment","item"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,YAAP;;;;AAEA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,OAAOC,YAAP;AACA,OAAOC,WAAP;;IAEqBC,Y;;;;;AACpB,0BAAe;AAAA;;AAAA;;AACd;AADc,UAQdC,UARc,GAQD,KARC;AAEd,UAAKC,KAAL,GAAa;AACZC,MAAAA,QAAQ,EAAE,EADE;AAEZC,MAAAA,MAAM,EAAE;AAFI,KAAb;AAFc;AAMd;;;;wCAIoB;AAAA;;AAEpB,WAAKH,UAAL,GAAkB,IAAlB;AAEAJ,MAAAA,QAAQ,CAACQ,QAAT,GAAoBC,GAApB,mBAAwC,KAAKC,KAAL,CAAWC,MAAnD,EAA6DC,EAA7D,CAAgE,OAAhE,EAAyE,UAAAC,QAAQ,EAAI;AACpF,YAAIP,QAAQ,GAAG,EAAf;AACAO,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,GAAG,EAAI;AACvBT,UAAAA,QAAQ,CAACU,IAAT,CAAc;AACbC,YAAAA,EAAE,EAAEF,GAAG,CAACG,GADK;AAEbC,YAAAA,MAAM,EAAEJ,GAAG,CAACK,GAAJ,GAAUD,MAFL;AAGbE,YAAAA,OAAO,EAAEN,GAAG,CAACK,GAAJ,GAAUC,OAHN;AAIbC,YAAAA,IAAI,EAAEP,GAAG,CAACK,GAAJ,GAAUE;AAJH,WAAd;AAOA,SARD;;AASA,YAAI,MAAI,CAAClB,UAAT,EAAqB;AACpB,UAAA,MAAI,CAACmB,QAAL,CAAc;AACdjB,YAAAA,QAAQ,EAARA,QADc;AAEdC,YAAAA,MAAM,EAAE;AAFM,WAAd;AAIC;AACF,OAjBD;AAkBA;;;2CAEuB;AACrB,WAAKH,UAAL,GAAkB,KAAlB;AACD;;;6BAEQ;AAAA;;AAAA,wBACkB,KAAKC,KADvB;AAAA,UACFC,QADE,eACFA,QADE;AAAA,UACQC,MADR,eACQA,MADR;;AAGT,UAAI,CAAEA,MAAN,EAAc;AACb,eAAO,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACA;;AAEE,UAAI,CAAED,QAAQ,CAACkB,MAAf,EAAuB;AACrB,eACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAGD;;AAEJ,aACC,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAE,EAAZ;AAAgBC,UAAAA,YAAY,EAAE;AAA9B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,QAAD;AACE,QAAA,IAAI,EAAEpB,QADR;AAEE,QAAA,UAAU,EAAE,oBAACqB,IAAD;AAAA,iBAAU,MAAI,CAACC,aAAL,CAAmBD,IAAI,CAACE,IAAxB,CAAV;AAAA,SAFd;AAGE,QAAA,YAAY,EAAE,sBAACF,IAAD;AAAA,iBAAUA,IAAI,CAACV,EAAf;AAAA,SAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CADD;AASA;;;kCAEaI,O,EAAS;AACtB,aACC,oBAAC,WAAD;AAAa,QAAA,OAAO,EAAEA,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD;AAGA;;;;EAnEwCvB,S;;SAArBK,Y","sourcesContent":["import React, {Component} from 'react';\nimport AppPreLoader from \"../components/AppPreLoader\";\nimport {StyleSheet, FlatList, View} from 'react-native';\nimport * as firebase from 'firebase';\nimport CommentEmpty from \"./CommentEmpty\";\nimport CommentList from \"../components/CommentList\";\n\nexport default class PostComments extends Component {\n\tconstructor () {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tcomments: [],\n\t\t\tloaded: false\n\t\t};\n\t}\n\n  _isMounted = false;\n\n\tcomponentDidMount () {\n\n\t\tthis._isMounted = true;\n\n\t\tfirebase.database().ref(`postComments/${this.props.postId}`).on('value', snapshot => {\n\t\t\tlet comments = [];\n\t\t\tsnapshot.forEach(row => {\n\t\t\t\tcomments.push({\n\t\t\t\t\tid: row.key,\n\t\t\t\t\trating: row.val().rating,\n\t\t\t\t\tcomment: row.val().comment,\n\t\t\t\t\tuser: row.val().user\n\n\t\t\t\t})\n\t\t\t});\n\t\t\tif (this._isMounted) {\n\t\t\t\tthis.setState({\n\t\t\t\tcomments,\n\t\t\t\tloaded: true\n\t\t\t});\n\t\t\t }\n\t\t})\n\t}\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n\trender () {\n\t\tconst {comments, loaded} = this.state;\n\n\t\tif( ! loaded) {\n\t\t\treturn(<AppPreLoader/>);\n\t\t}\n\n\t    if (! comments.length) {\n\t      return (\n\t        <CommentEmpty/>\n\t      );\n\t    }\n\n\t\treturn (\n\t\t\t<View style={{marginTop: 25, marginBottom: 25}}>\n\t\t\t\t<FlatList\n\t\t\t\t\t\tdata={comments}\n\t\t\t\t\t\trenderItem={(data) => this.renderComment(data.item)}\n\t\t\t\t\t\tkeyExtractor={(data) => data.id}\n\t\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderComment(comment) {\n\t\treturn (\n\t\t\t<CommentList comment={comment} />\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}